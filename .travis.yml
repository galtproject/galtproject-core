language: node_js
node_js:
  - "10"

sudo: required

dist: trusty

before_install:
  - wget https://github.com/ethereum/solidity/releases/download/v0.5.10/solc-static-linux
  - chmod ugo+x solc-static-linux
  - sudo mv solc-static-linux /usr/bin/solc
  - 'which ssh-agent || ( apt-get update -y && apt-get install openssh-client -y )'
  - eval $(ssh-agent -s)
  - echo "$SSH_PRIVATE_KEY" | tr -d '\r' | ssh-add - > /dev/null
  - mkdir -p ~/.ssh
  - chmod 700 ~/.ssh
  - ssh-keyscan -t rsa github.com >> ~/.ssh/known_hosts

install:
  - npm install

script:
  - npm run eslint && npm run ethlint && npm run compile && node scripts/checkContractSize.js && npm run test
